---
---

<div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 my-8">
  <h3 class="text-lg font-bold text-gray-900 mb-2">ðŸ“§ Subscribe to Weekly Digests</h3>
  <p class="text-gray-600 mb-4">Get the latest AI news delivered to your inbox every week. No spam, unsubscribe anytime.</p>
  
  <form id="subscribe-form" class="flex flex-col sm:flex-row gap-2">
    <input
      type="email"
      id="subscribe-email"
      name="email"
      required
      placeholder="your@email.com"
      class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />
    <button
      type="submit"
      class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"
    >
      Subscribe
    </button>
  </form>
  
  <div id="subscribe-status" class="hidden mt-4"></div>
</div>

<script>
  const form = document.getElementById('subscribe-form');
  const status = document.getElementById('subscribe-status');
  const submitBtn = form?.querySelector('button[type="submit"]');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    if (!submitBtn) return;
    
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = 'Subscribing...';
    
    const formData = new FormData(form);
    const email = formData.get('email');

    try {
      const response = await fetch('/api/subscribe', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email })
      });

      const data = await response.json();

      if (response.ok) {
        status.className = 'mt-4 p-4 bg-green-100 text-green-800 rounded-lg';
        status.textContent = data.message || 'Check your email to confirm subscription!';
        status.classList.remove('hidden');
        form.reset();
      } else {
        status.className = 'mt-4 p-4 bg-red-100 text-red-800 rounded-lg';
        status.textContent = data.error || 'Failed to subscribe. Please try again.';
        status.classList.remove('hidden');
      }
    } catch (error) {
      console.error('Error subscribing:', error);
      status.className = 'mt-4 p-4 bg-red-100 text-red-800 rounded-lg';
      status.textContent = 'Failed to subscribe. Please try again.';
      status.classList.remove('hidden');
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  });
</script>

